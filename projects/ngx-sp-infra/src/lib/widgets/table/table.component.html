@if (list) {
   <div class="table-list w-100 position-relative">

      <!-- Trechos de texto acima da table -->
      @if (showCounter) {
         <div class="mb-2 d-flex align-items-center">
            <div class="col-6">
               <!-- Exibe o número de itens mostrados e o total de registros -->
               <span> {{ itemsDisplayText }} </span>

               <!-- Exibe a badge informando quantos registros foram selecionados -->
               <span *ngIf="selectedCount && selectedCount > 0" class="ms-2 badge text-bg-primary">{{ selectedCount }} registros selecionados</span>
            </div>

            <div class="col d-flex flex-row align-items-center justify-content-end">
               <ng-content select="[rightSideContent]"></ng-content>
            </div>
         </div>
      }

      <!-- Container da tabela -->
      <div class="table-list overflow-hidden border-bottom-0 {{divBorderClass}}">
         <table class="table table-hover border mb-0 {{tableBorderClass}}">
            <thead>
               <tr>
                  <!-- Itera sobre a lista de cabeçalhos para criar as colunas -->
                  <th *ngIf="useSelection" >
                     <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="tableCheckAll" [(ngModel)]="selection" (ngModelChange)="selectionChange.emit($event)">
                     </div>
                  </th>

                  <th *ngFor="let header of headers" scope="col"
                     class="align-middle text-dark-grey {{ header.customClasses }}
                        {{ headersUseOldWidth
                           ? header.col && header.col > 0 ? 'col-'+header.col : 'col'
                           : header.widthClass }}" >

                     @if (header.icon !== undefined) {
                        <lib-icon *ngIf="header.icon.side === 'L'" iconSize="small"
                           [iconName]="header.icon.name"
                           [iconColor]="header.icon.theme !== 'currentColor' && header.icon.theme ? header.icon.theme : 'currentColor'"
                           [tooltip]="header.icon.tooltip"
                           (click)="header.icon.emitClick ? iconClick.emit(header.name) : null"  />
                        {{ header.name }}
                        <lib-icon *ngIf="header.icon.side === 'R' || !header.icon.side" iconSize="small"
                           [iconName]="header.icon.name"
                           [iconColor]="header.icon.theme !== 'currentColor' && header.icon.theme ? header.icon.theme : 'currentColor'"
                           [tooltip]="header.icon.tooltip"
                           [class.cursor-pointer]="header.icon.emitClick"
                           (click)="header.icon.emitClick ? iconClick.emit(header.name) : null"  />
                     }
                     @else {
                        {{ header.name }}
                     }


                     <app-ordering *ngIf="header.orderColumn" [(sortDirection)]="sortDirection[header.orderColumn]"
                        (sortChange)="onSortChange({ direction: $event.direction, column: header.orderColumn })"></app-ordering>
                  </th>
               </tr>
            </thead>

            <tbody class="bg-light fade-in-row">
               @if (list.length > 0) {
                  <!-- Conteúdo das linhas da tabela -->
                  <ng-content select="[innerRows]"></ng-content>
               }
               @else {
                  <!-- Mensagem de ausência de registros -->
                  <tr>
                     <td colspan="12" class="align-middle text-center p-4 text-dark-grey">
                        <span> {{ emptyListMessage ? emptyListMessage : "Não há dados para serem listados." }} </span>
                     </td>
                  </tr>
               }
            </tbody>
         </table>

         <!-- #region PAGINAÇÃO -->
         <div *ngIf="usePagination && list.length > 0" class="d-flex mt-2"
            [ngClass]="{
               'justify-content-start': placement === 'start',
               'justify-content-center': placement === 'center',
               'justify-content-end': placement === 'end',
               'justify-content-between': placement === 'between'
            }">
            <div class="d-flex align-items-center">
               <label for="countSelect" class="me-2" style="white-space: nowrap;"> Itens por página </label>
               <select id="countSelect" class="form-select select-search" (change)="onSelectChange($event)">
                  <option *ngFor="let count of counts; let i = index" [value]="count"
                     [selected]="counts ? (counts.length > 0 && i === 0) : false">{{ count }}</option>
               </select>
            </div>

            <!-- Controle de paginação -->
            <pagination-controls
               [id]="paginationID"
               class="sp-pagination mt-3"
               (pageChange)="page = $event; pageChange.emit($event)"
               previousLabel="«&nbsp;&nbsp;&nbsp;" nextLabel="&nbsp;&nbsp;&nbsp;»"
               [maxSize]="5"
               (pageBoundsCorrection)="page = $event">
            </pagination-controls>
         </div>
         <!-- #endregion PAGINAÇÃO -->
      </div>
   </div>
} @else {
   <!-- Loader enquanto os registros são carregados -->
   <div class="w-100 text-center p-3">
      <div class="spinner-border" role="status"> <span class="visually-hidden">Carregando informações...</span> </div>
   </div>
}
