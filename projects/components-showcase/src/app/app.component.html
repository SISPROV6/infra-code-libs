<lib-header [breadcrumbList]="[ 'Demonstração', 'Componentes' ]" pageTitle="Demonstração de componentes" />

<div class="content">
  <div class="filters">
    
    <lib-container [tabs]="[ 'Combobox', 'Table' ]" [useBorder]="true" >
      <div innerContent1>
        <div class="d-flex gap-2 mb-5">
          <input type="text" class="form-control" placeholder="Informe aqui o valor customizado" [(ngModel)]="valorCustomizado" (keyup.enter)="setExternalValue(valorCustomizado ?? '')" >
          <button class="btn btn-outline-primary" (click)="setExternalValue(valorCustomizado ?? '')" >DEFINIR</button>
        </div>

        <div class="d-flex gap-2 mb-5">
          <button class="btn btn-outline-primary" (click)="openConfirm()" >ABRIR MODAL CONFIRM</button>
        </div>

        <form [formGroup]="form">
          <div class="row">
            <div class="col">
              <label class="form-label" libRequired>Pokemons (lib-combobox-rework)</label>
              <lib-combobox-rework [list]="pokemons" formControlName="pokemon" (selectionChange)="log($event)" [innerFilter]="false" (filterChange)="filterRecords($event)" />
            </div>
  
            <div class="col">
              <lib-combobox labelText="Pokemons (lib-combobox)" [list]="pokemonsCombobox" [control]="form.controls['pokemon']" mainPlaceholder="Selecione um Pokemón">
                <button btnLeft class="btn btn-sm btn-primary" tooltip="Abrir modal com listagem completa"> <lib-icon iconName="usuario-quadro" /> </button>
                <button btnRight class="btn btn-sm btn-primary" tooltip="Abrir modal com listagem completa"> <lib-icon iconName="usuario-quadro" /> </button>
              </lib-combobox>
            </div>
          </div>
        </form>
      </div>

      <div innerContent2>
        <div class="d-flex gap-3 mb-3">
          <button class="btn btn-outline-primary" (click)="itemsPerPage = 5" >5</button>
          <button class="btn btn-outline-primary" (click)="itemsPerPage = 10" >10</button>
          <button class="btn btn-outline-primary" (click)="itemsPerPage = 15" >15</button>
        </div>

        <lib-table [list]="recordsList" [counts]="[ 5, 10, 15 ]" [itemsPerPage]="itemsPerPage" paginationID="simpleTable" [usePreviousStyle]="true"
          (itemsPerPageChange)="itemsPerPage = $event" (pageChange)="page = $event" [scrollable]="true"
          
          [useSelection]="true" [selection]="selecaoService1.selecaoGeral" [selectedCount]="selecaoService1.quantidadeSelecionados()"
          (selectionChange)="selecaoService1.definirSelecaoTotal(recordsList, $event, 'id')"

          [headers]="[
            { name: 'Nome', widthPixels: 250 },
            { name: 'Descrição', widthPixels: 250 },
            { name: 'Valor', customClasses: 'text-start', widthPixels: 250 },
            { name: '', customClasses: 'text-start', widthPixels: 250 }
          ]" >

          @for (item of recordsList! | paginate: { id: 'simpleTable', itemsPerPage: itemsPerPage, currentPage: page }; track item) {
              <tr innerRows class="align-middle">
                <td>
                    <div class="form-check"> <input class="form-check-input" type="checkbox" [ngModel]="selecaoMap1.get(item.id)" (ngModelChange)="selecaoService1.inverterSelecao(item.id)"> </div>
                </td>

                <td> <a class="text-primary text-decoration-none fw-bold" tooltip="Editar/Visualizar">{{ item.ID }}</a> </td>
                <td>{{ item.LABEL }}</td>
                <td class="text-start">{{ 5.55 }}</td>
                <td class="fix">
                    <div class="d-flex flex-row align-items-center justify-content-end">
                      <lib-icon iconName="editar" iconColor="blue" tooltip="Visualizar/Editar" />
                      <div class="form-check form-switch ms-2"> <input class="form-check-input" type="checkbox" role="switch" [checked]="item.isAtivo"> </div>
                    </div>
                </td>
              </tr>
          }
        </lib-table>
      </div>
    </lib-container>

  </div>
</div>